# data_handling
Репозиторий с примерами чтения и обработки данных из файлов, парсинга данных с вэб ресурсов и доставки их пользователям с использованием телеграм-ботов.
В этом проекте используются следующие модули:

news_maker.py - забирает последнюю новость с сайта vk.ru
Может использоваться самостоятельно // python news_maker.py
Так же импортируется в модуль news_bot.py

news_bot.py - простой телеграм бот, работающий в инлайн режиме.
Бот может быть вызван в любом чате @bot_name. Если ввести "news" в плэйсхолдер вернет последнюю новость с vk.ru
Если ввести что угодно или пустую строку - вернет инструкцию по работе с ботом
Для работы программы необходимо передать вместо TOKEN реальный токен вашего зарегистрированного бота.
В настройках @BotFather установить inline режим и текст плэйсхолдера, например "Введите news чтобы получить последние новости"

realty_analizer.py - анализирует большие файлы (передается параметром при вызове программы) с описанием недвижимости и возвращает файл result.csv,
в котором собрана недвижимость, проданная более одного раза.
Обработка данных идет построчно для экономии памяти.
Для анализа повторения повторных продаж используется встроенный словарь, ключами в котором являются уникальные хэши объектов
(опять же для экономии памяти и скорости работы)
Пример вызова python realty_analizer.py pp-complete.csv
скачать можно исходный файл можно по ссылке:
https://disk.yandex.ru/d/ZTnv3LiUeqEK5A, описание столбцов тут https://www.gov.uk/guidance/about-the-price-paid-data)


Так же в репозитории представлен файл support.groovy, в котором сделано предположение по исправлению бага, дублирующего запрос 2-м сотрудникам.
Предположу, что проблема в использовании метода collect{ key, value -> value.max{ it.version }, который может приводить к автоматическому
изменению id запроса. Использование вместо него findAll{ key, value -> value.max{ it.version } должно решить проблему.